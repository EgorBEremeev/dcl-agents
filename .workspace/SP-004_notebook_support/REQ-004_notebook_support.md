# REQ-004: Поддержка Notebook и упаковка

**Версия:** 1.0
**Спринт:** SP-004
**Дата:** 2025-12-26

---

## 1. Цель
Обеспечить возможность установки `dcl-agent` как стандартного Python-пакета для использования в Jupyter Notebook и Google Colab, упростив процесс импорта и настройки окружения.

---

## 2. Функциональные требования

### 2.1 Упаковка (Packaging)
Код агента, расположенный в `src/dcl_agent`, должен быть оформлен как Python-пакет.

#### 2.1.1 Конфигурация сборки
- Использовать стандарт `pyproject.toml`.
- Система сборки: `setuptools`.
- Местоположение: `src/dcl_agent/pyproject.toml`.
- Название пакета: `dcl-agent`.
- Версия: `0.1.0`.

#### 2.1.2 Зависимости
Пакет должен автоматически устанавливать необходимые зависимости:
- `lark >= 1.1.9`
- `google-genai >= 0.1.0`
- `PyYAML >= 6.0`

### 2.2 Поддержка Notebook
Существующий ноутбук `notebooks/dcl-agent.ipynb` должен быть обновлен для использования установленного пакета.

#### 2.2.1 Импорт
- Удалить манипуляции с `sys.path` (`sys.path.append(...)`).
- Использовать стандартный импорт: `from dcl_agent.agent import DCLAgent`.

#### 2.2.2 Сценарии установки (Instructional Cells)
В ноутбук должна быть добавлена ячейка с инструкциями (закомментированными) по установке пакета для двух сценариев:
1.  **Локальная разработка:** Установка в режиме редактирования (`pip install -e ...`).
2.  **Google Colab:** Установка напрямую из Git-репозитория (`pip install git+...`).

---

## 3. Нефункциональные требования

1.  **Python Version:** >= 3.12 (в соответствии с архитектурой).
2.  **Совместимость:** Структура проекта (расположение исходников) не должна меняться глобально, добавляется только файл конфигурации.
3.  **Cross-Platform:** Решение должно работать в Linux (Colab) и Windows (Local).

---

## 4. Критерии приемки

1.  Присутствует файл `src/dcl_agent/pyproject.toml`.
2.  Команда `pip install -e src/dcl_agent` успешно выполняется в локальном окружении.
3.  Ноутбук `notebooks/dcl-agent.ipynb` успешно исполняется после установки пакета (импорты работают).
4.  В ноутбуке присутствуют инструкции для установки в Colab.

---

## 5. Открытые вопросы
Нет.
