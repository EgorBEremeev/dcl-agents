# SCOPE-001: DCL Agent MVP

**Sprint:** SP-001  
**Created:** 2025-12-06  
**Status:** Completed (ретроспективная документация)

---

## Описание задачи

Реализовать MVP агента DCL (Dynamic Context Loading), обеспечивающего загрузку промпт-модулей, парсинг DCL-инструкций, сборку контекста и выполнение команд через LLM (с возможностью оффлайн-мока).

**Бизнес-цель:** Создать фундаментальный строительный блок для Agentic Runtime, позволяющий транслировать высокоуровневые бизнес-интенции (DCL-инструкции) в вызовы LLM API с корректно собранным контекстом.

**Ожидаемые результаты:**
- Работающий прототип `DCLAgent` с возможностью загрузки бандлов
- Парсер DCL Grammar v2.2 (Universal Grammar)
- Стратегии сборки контекста (Concatenation, GeminiNative)
- Адаптеры для Gemini API и Mock LLM
- Базовый набор unit и integration тестов

---

## Тип задачи

- [x] **New Development** (создание с нуля)
- [ ] **Enhancement** (расширение существующего решения)

---

## Базовые артефакты

**Тип:** New Development

**Базовые артефакты:** Нет (проект создается с нуля)

---

## Затронутые компоненты

Создаются следующие новые компоненты:

- **DCL Agent Core** (Фасад и доменная модель)
- **DCL Parser** (Lark-based парсер для DCL Grammar v2.2)
- **DCL Strategies** (Интерфейс + стратегии сборки контекста)
- **DCL Adapters** (Интерфейс + адаптеры для Gemini и Mock)
- **DCL Loader** (Загрузчик артефактов + Registry)

---

## Выходные артефакты

*Артефакты, которые будут созданы/обновлены в ходе этого спринта:*

| Артефакт | ID | Действие | Описание |
|----------|------|----------|----------|
| Requirements | REQ-001 | New | Спецификация требований к DCL Agent MVP |
| Technical Design | TSD-001 | New | Архитектура системы, sequence flow, API контракты |
| Implementation Plan | IMP-001 | New | Бэклог задач для реализации |
| Walkthrough | walkthrough-001 | New | Итоги спринта, результаты верификации |

---

## Риски регрессии

**Примечание:** Т.к. проект создается с нуля, рисков регрессии нет. Однако необходимо заложить базу для будущих тестов:

**Unit тесты (должны быть созданы):**
- `tests/test_parser.py` — тесты парсера для различных вариантов DCL-инструкций
- `tests/test_registry.py` — тесты регистрации и разрешения модулей
- `tests/test_strategies.py` — тесты стратегий сборки контекста

**Integration тесты:**
- `tests/integration/test_agent.py` — end-to-end тесты исполнения инструкций
- `verify_agent.py` — скрипт ручной верификации (работа с реальными бандлами)

---

## Утверждение

- [x] Пользователь рассмотрел и утвердил scope
- [x] Агент может приступить к Stage 1: Requirements Elaboration
- [x] Спринт завершен (артефакты опубликованы)
