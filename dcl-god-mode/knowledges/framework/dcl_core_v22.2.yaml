# METADATA
id: sys/frameworks/dcl_core
type: KNOWLEDGE_BASE
version: 22.2
description: "Фундаментальная онтология Domain Context Language (DCL). Содержит аксиомы, определения типов модулей, грамматических ролей и синтаксиса. Является нормативным справочником (Single Source of Truth) для валидации всех сущностей экосистемы, включая саму себя."

# IDENTITY
role: "DCL Domain Ontology and Specification"
worldview: "Вы — авторитетный источник истины экосистемы Domain Context Language. Вы предоставляете точные, недвусмысленные определения. Для вас семантическая точность и структурная строгость важнее метафор. Вы обеспечиваете, чтобы язык мог описывать сам себя (Homoiconicity)."

# GUARDRAILS
constraints:
  - "Не галлюцинировать правила, явно не указанные в Аксиомах."
  - "Не смешивать 'Грамматические Роли' (функция в предложении) и 'Физические Типы' (структура файла)."
  - "Определения системных компонентов должны быть циклически замкнутыми (рекурсивными), но определения Данных — открытыми."
  - "Запрещено оставлять акронимы или ключевые концепции без определений."
  - "Все термины и описания должны быть на русском языке, за исключением зарезервированных ключевых слов синтаксиса (OPERATOR, FROM, USING и т.д.)."

# KNOWLEDGE
definitions:
  - term: "Domain Context Language (DCL)"
    definition: "Декларативный язык высокого уровня для трансляции абстрактной Интенции (Intent) в структурированные контекстные фреймы для AI-агентов. Он соединяет высокоуровневую логику ('Зачем') с низкоуровневым промпт-инжинирингом ('Как'). Архитектурно язык разделен на два слоя: 'DCL Core' (данная спецификация) и 'Domain-Specific Layer' (прикладная часть), которая проектируется методологом под конкретную предметную область."
  - term: "Intent (Интенция)"
    definition: "Абстрактная цель или намерение, управляющее операцией над сущностью домена. Интенция является пусковым механизмом для выбора Оператора."
  - term: "Prompt Module (Промпт-Модуль)"
    definition: "Атомарная единица Контекста для LLM-агентов. Технически представляет собой семантически завершенный, переиспользуемый YAML-файл. Является артефактом этапа проектирования (Design-Time Artifact), который служит строительным блоком для формирования инструкций."
  - term: "DCL Instruction (DCL-инструкция)"
    definition: "Декларативная командная строка, объединяющая Промпт-Модули в синтаксическую структуру для выполнения работы над Операндом."
  - term: "Slot (Слот)"
    definition: "Переменная-заполнитель (например, `{{user_input}}`) внутри раздела INTERFACE модуля, предназначенная для инъекции данных или влияния других модулей."

axioms:
  - name: "Axiom of System Unity (Аксиома Системного Единства)"
    statement: "Управляющий слой DCL (Control Plane) состоит ровно из одного класса физических сущностей: 'Prompt Module'. В рамках самоописания DCL Core, 'Prompt Module' является единственным объектом предметной области."
  - name: "Axiom of Typing (Аксиома Типизации)"
    statement: "Каждый Промпт-Модуль обладает одним внутренним, статическим Типом, определенным в поле `METADATA.type` (OPERATOR, MODIFIER или KNOWLEDGE_BASE). Тип определяет обязательную структуру файла."
  - name: "Axiom of Domain Scope (Аксиома Области Действия)"
    statement: "Операции DCL всегда действуют над 'Операндами'. Природа Операнда зависит от активного Домена: в Мета-Домене (System) операндом является Промпт-Модуль; в Бизнес-Домене (Business) операндом является Объект Данных."
  - name: "Axiom of Interaction (Аксиома Взаимодействия)"
    statement: "DCL-инструкции присваивают сущностям динамические 'Грамматические Роли' в зависимости от их позиции в синтаксисе, независимо от их статического Типа."

grammar:
  syntax: "OPERATOR [OPERAND] FROM [SOURCE_LIST] USING [MODIFIER_LIST] OPTIMIZING_FOR [GOAL_LIST]"
  parsing_rules:
    - "Первый токен ОБЯЗАН разрешаться в модуль типа OPERATOR."
    - "Токен, следующий непосредственно за Оператором, является ОПЕРАНДОМ (OPERAND)."
    - "Клаузы FROM, USING, OPTIMIZING_FOR являются опциональными, но зависимыми от порядка."
    - "Списки внутри клауз разделяются запятыми."

prompt_module_types:
  - type: "OPERATOR"
    nature: "Active / Imperative (Активная / Императивная)"
    required_components: ["IDENTITY", "COGNITIVE STRATEGY", "INTERFACE", "VERIFICATION"]
    description: "Модуль, содержащий логику выполнения трансформации. Отвечает на вопрос 'Что делать?'."
  - type: "MODIFIER"
    nature: "Structural / Biased (Структурная / Направляющая)"
    required_components: ["IDENTITY", "GUARDRAILS", "KNOWLEDGE"]
    description: "Модуль, содержащий специфическую перспективу, структуру, формат или набор ограничений. Накладывается на Оператора."
  - type: "KNOWLEDGE_BASE"
    nature: "Passive / Declarative (Пассивная / Декларативная)"
    required_components: ["IDENTITY", "KNOWLEDGE"]
    description: "Модуль, содержащий статические определения, факты, схемы или фреймворки. Не содержит исполняемой логики."

grammatical_roles:
  - role: "The Operator (Оператор)"
    clause: "START"
    function: "Определяет ИНТЕНЦИЮ (Глагол)."
    valid_types: ["OPERATOR"]
  - role: "The Operand (Операнд)"
    clause: "Direct Object (Прямое Дополнение)"
    function: "Определяет ЦЕЛЕВОЙ ПРЕДМЕТ (Существительное)."
    semantics: "Сущность, над которой производится действие. Это могут быть как объекты предметной области (данные), так и другие Промпт-Модули (при рефакторинге)."
    valid_types: ["ANY (Prompt Module OR Business Object)"]
  - role: "The Source (Источник)"
    clause: "FROM [...]"
    function: "Определяет КОНТЕКСТНЫЕ ДРАЙВЕРЫ (История, Фидбек, Сырые данные)."
    valid_types: ["ANY"]
  - role: "The Modifier (Модификатор/Линза)"
    clause: "USING [...]"
    function: "Определяет МЕТОД или СТРУКТУРУ."
    semantics: "Жесткое ограничение (Hard Constraint). Задает 'Форму' (Формат, Персона). Выходные данные обязаны соответствовать этой форме."
    valid_types: ["MODIFIER", "KNOWLEDGE_BASE"]
  - role: "The Goal (Цель)"
    clause: "OPTIMIZING_FOR [...]"
    function: "Определяет ЭВРИСТИЧЕСКУЮ СТРАТЕГИЮ (Компас)."
    semantics: "Мягкое ограничение (Soft Constraint). Задает 'Направление' (Скорость vs Качество). Внедряет эвристики принятия решений в когнитивный процесс Оператора."
    valid_types: ["MODIFIER"]

# INTERFACE
# Согласно определению типа KNOWLEDGE_BASE в данном фреймворке, раздел INTERFACE отсутствует,
# так как База Знаний является пассивным модулем, который "читают", а не "вызывают".
slots: []
output_contract: "Предоставляет определения и правила по запросу (Lookup)."

# VERIFICATION
checklist:
  - "Присутствуют ли все аксиомы DCL?"
  - "Соответствует ли этот файл определению типа KNOWLEDGE_BASE (наличие IDENTITY и KNOWLEDGE)?"
  - "Переведены ли все описания на русский язык?"
  - "Интегрированы ли комментарии о двойственной природе DCL и статусе дизайн-тайм артефактов?"